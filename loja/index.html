<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>4S STORE | Loja</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="icon" href="/public/favicon.png" type="image/png">
<style>
*{box-sizing:border-box}
body{
 margin:0;
 font-family:'Inter',sans-serif;
 background:radial-gradient(circle at top,#0f172a,#020617);
 color:#e5e7eb;
 overflow-x:hidden;
}

/* HEADER */
header{
 background:rgba(2,6,23,.85);
 border-bottom:1px solid rgba(59,130,246,.35);
 padding:14px 22px;
 display:flex;
 justify-content:space-between;
 backdrop-filter:blur(10px);
 box-shadow:0 0 18px rgba(59,130,246,.25);
}
nav a{color:#cbd5f5;text-decoration:none}

.container{max-width:1300px;margin:auto;padding:40px 20px}

/* CATEGORIES */
.categories{
 display:flex;
 flex-wrap:wrap;
 gap:12px;
 justify-content:center;
 margin-bottom:26px;
 
}
.categories button{
 padding:10px 18px;
 border-radius:999px;
 border:1px solid rgba(59,130,246,.35);
 background:rgba(15,23,42,.85);
 color:#e5e7eb;
 cursor:pointer;
 font-size:13px;
 transition:.25s;
 box-shadow:0 0 12px rgba(59,130,246,.25);
}
.categories button:hover{
 box-shadow:0 0 18px rgba(59,130,246,.6);
 background:linear-gradient(135deg,#2563eb,#3b82f6);
 
}
.categories button.active{
}

/* SEARCH */
.search-box input{
 width:100%;
 padding:14px;
 border-radius:14px;
 border:1px solid rgba(59,130,246,.35);
 background:rgba(2,6,23,.9);
 color:#fff;
 margin-bottom:26px;
 box-shadow:0 0 16px rgba(59,130,246,.25) inset;
}

/* GRID */
.grid{
 display:grid;
 grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
 gap:18px;
}

/* CARD */
.product{
 background:linear-gradient(180deg,rgba(2,6,23,.95),rgba(2,6,23,.85));
 border:1px solid rgba(59,130,246,.35);
 border-radius:22px;
 padding:16px;
 text-align:center;
 position:relative;
 transition:.25s;
 box-shadow:0 0 18px rgba(59,130,246,.25);
}
.product:hover{
 transform:translateY(-6px);
 box-shadow:0 0 32px rgba(59,130,246,.55);
}

.badge{
 position:absolute;
 top:10px;
 left:10px;
 background:linear-gradient(135deg,#2563eb,#3b82f6);
 padding:4px 10px;
 border-radius:999px;
 font-size:11px;
 box-shadow:0 0 14px rgba(59,130,246,.9);
}
.low-stock{
 position:absolute;
 top:10px;
 right:10px;
 background:#ef4444;
 color:#fff;
 padding:4px 10px;
 border-radius:999px;
 font-size:11px;
 box-shadow:0 0 14px rgba(239,68,68,.8);
}

/* IMAGE */
.image-box{
 width:100%;
 height:130px;
 background:rgba(15,23,42,.6);
 border-radius:16px;
 display:flex;
 align-items:center;
 justify-content:center;
 margin-bottom:10px;
 box-shadow:0 0 16px rgba(59,130,246,.25) inset;
}
.image-box img{
 max-width:100%;
 max-height:100%;
 object-fit:contain;
}

.product h3{font-size:14px;margin:10px 0}
.price{
 font-weight:600;
 color:#fde047;
 text-shadow:0 0 14px rgba(250,204,21,.8);
}
.stock{font-size:12px;color:#94a3b8}

.product button{
 margin-top:12px;
 padding:10px 16px;
 border:none;
 border-radius:14px;
 background:linear-gradient(135deg,#2563eb,#3b82f6);
 color:#fff;
 cursor:pointer;
 box-shadow:0 0 18px rgba(59,130,246,.7);
 transition:.2s;
}
.product button:hover{transform:scale(1.05)}
.product button:disabled{
 background:#334155;
 box-shadow:none;
}

/* PAGINATION */
.pagination{
 display:flex;
 justify-content:center;
 gap:10px;
 margin-top:30px;
}
.pagination button{
 padding:8px 14px;
 border-radius:10px;
 border:1px solid rgba(59,130,246,.35);
 background:rgba(2,6,23,.85);
 color:#fff;
 cursor:pointer;
 box-shadow:0 0 12px rgba(59,130,246,.25);
}
.pagination button.active{
 background:#2563eb;
 box-shadow:0 0 18px rgba(59,130,246,.9);
}

/* CART BUTTON */
.cart-btn{
 position:fixed;
 bottom:22px;
 right:22px;
 background:linear-gradient(135deg,#2563eb,#3b82f6);
 padding:16px 22px;
 border-radius:50px;
 box-shadow:0 0 30px rgba(59,130,246,.9);
 color:#fff;
 cursor:pointer;
 z-index:50;
 transition:.2s;
}
.cart-btn.bump{transform:scale(1.2)}

/* CART MODAL */
#cartModal{
 position:fixed;
 inset:0;
 background:rgba(2,6,23,.9);
 display:none;
 justify-content:center;
 align-items:center;
 z-index:10000;
}
.cart-box{
 background:linear-gradient(180deg,#020617,#020617ee);
 border:1px solid rgba(59,130,246,.35);
 border-radius:22px;
 padding:24px;
 width:420px;
 box-shadow:0 0 40px rgba(59,130,246,.6);
 position:relative;
 z-index:10001;
}
.cart-item{
 display:flex;
 justify-content:space-between;
 align-items:center;
 margin:12px 0;
}
.qty-controls button{
 padding:4px 10px;
 border:none;
 border-radius:6px;
 background:#1e40af;
 color:#fff;
 cursor:pointer;
 box-shadow:0 0 12px rgba(59,130,246,.7);
}

.cart-total{
 margin-top:14px;
 font-weight:700;
 text-align:right;
 color:#fde047;
 text-shadow:0 0 14px rgba(250,204,21,.8);
}
.checkout-btn{
 margin-top:16px;
 width:100%;
 padding:14px;
 border:none;
 border-radius:14px;
 background:linear-gradient(90deg,#22c55e,#16a34a);
 font-weight:700;
 cursor:pointer;
 box-shadow:0 0 26px rgba(34,197,94,.9);
}
</style>
</head>

<body>

<header>
 <strong>4S STORE</strong>
 <nav><a href="https://4sstore.vercel.app/">ùôøùöäùöêùöíùöóùöä ùô∏ùöóùöíùöåùöíùöäùöï</a></nav>
</header>

<div class="container">
 <div class="categories" id="categories"></div>
 <div class="search-box">
  <input id="search" placeholder="Buscar produto..." oninput="render()">
 </div>
 <div class="grid" id="products"></div>
 <div class="pagination" id="pagination"></div>
</div>

<button class="cart-btn" onclick="openCart()" id="cartBtn">üõí Carrinho (0)</button>

<div id="cartModal">
 <div class="cart-box">
  <h3>Carrinho</h3>
  <div id="cartItems"></div>
  <div class="cart-total">Total: R$ <span id="total">0</span></div>
  <button class="checkout-btn" onclick="checkout()">Finalizar no WhatsApp</button>
  <p style="text-align:center;cursor:pointer;margin-top:12px" onclick="closeCart()">Fechar</p>
 </div>
</div>

<script>
const phone="5524999561861";
const perPage=25;
let page=1;
let currentCategory="all";

/* PRODUTOS */
const productsData=[];
const ADD=p=>productsData.push({...p,baseStock:p.stock});
/* PRODUTOS CAPA*/
ADD({id:1,name:"Asas Douradas da Justi√ßa",price:3.99,stock:1,category:"capa",promo:false,img:"public/img/Asas Douradas da Justi√ßa.png"});
ADD({id:2,name:"Asas Negras do Arcanjo",price:3.99,stock:1,category:"capa",promo:false,img:"public/img/Asas Negras do Arcanjo.png"});
ADD({id:3,name:"Asas de Tronos",price:3.99,stock:1,category:"capa",promo:false,img:"public/img/Asas de Tronos.png"});
ADD({id:4,name:"Asas da Sarakura",price:3.99,stock:1,category:"capa",promo:false,img:"public/img/Asas da Sarakura.png"});
ADD({id:5,name:"Asas do Tormento",price:3.99,stock:1,category:"capa",promo:false,img:"public/img/Asas do Tormento.png"});
ADD({id:6,name:"Asas Hologr√°ficas",price:3.99,stock:1,category:"capa",promo:false,img:"public/img/Asas Hologr√°ficas.png"});
ADD({id:7,name:"Asas Mec√¢nicas de Borboleta",price:3.99,stock:1,category:"capa",promo:false,img:"public/img/Asas Mec√¢nicas de Borboleta.png"});
ADD({id:8,name:"Asas Pav√£o Roxo",price:3.99,stock:1,category:"capa",promo:false,img:"public/img/Asas Pav√£o Roxo.png"});
ADD({id:9,name:"Pequenas Asas do Tormento",price:3.99,stock:1,category:"capa",promo:false,img:"public/img/Pequenas Asas do Tormento.png"});
ADD({id:10,name:"Asa de Morcego Mutante",price:3.99,stock:1,category:"capa",promo:false,img:"public/img/Asa de Morcego Mutante.png"});
/* PRODUTOS MEIO*/
ADD({id:30,name:"Pupilas Draconianas",price:5.99,stock:1,category:"meio",promo:15,img:"public/img/Pupilas Draconianas.png"});
ADD({id:31,name:"Pupilas Avermelhadas",price:5.99,stock:1,category:"meio",promo:15,img:"public/img/Pupilas Avermelhadas.png"});
ADD({id:36,name:"Piscadela Congelante",price:5.99,stock:1,category:"meio",promo:15,img:"public/img/Piscadela Congelante.png"});
ADD({id:32,name:"Pupilas Douradas",price:5.99,stock:1,category:"meio",promo:15,img:"public/img/Pupilas Douradas.png"});
ADD({id:33,name:"Pupilas Cer√∫leas",price:4.99,stock:1,category:"meio",promo:false,img:"public/img/Pupilas Cer√∫leas.png"});
ADD({id:34,name:"Pupilas Azuladas",price:4.99,stock:1,category:"meio",promo:false,img:"public/img/Pupilas Azuladas.png"});
ADD({id:35,name:"Pupilas Carmesins",price:4.99,stock:1,category:"meio",promo:false,img:"public/img/Pupilas Carmesins.png"});
ADD({id:37,name:"Piscadela",price:4.99,stock:1,category:"meio",promo:false,img:"public/img/Piscadela.png"});
ADD({id:38,name:"Piscadela de Freya",price:4.99,stock:0,category:"meio",promo:false,img:"public/img/Piscadela de Freya.png"});
ADD({id:39,name:"Piscadela Rosa",price:4.99,stock:0,category:"meio",promo:false,img:"public/img/Piscadela Rosa.png"});
/* PRODUTOS BAIXO*/
ADD({id:50,name:"Cachecol Celestial",price:4.99,stock:1,category:"baixo",promo:false,img:"public/img/Cachecol Celestial.png"});
ADD({id:51,name:"Cachecol Preto do Eremes",price:4.99,stock:1,category:"baixo",promo:false,img:"public/img/Cachecol Preto do Eremes.png"});
ADD({id:52,name:"Cachecol Azul do Eremes",price:4.99,stock:1,category:"baixo",promo:false,img:"public/img/Cachecol Azul do Eremes.png"});
ADD({id:53,name:"Cachecol Marrom com La√ßo",price:3.99,stock:1,category:"baixo",promo:false,img:"public/img/Cachecol Marrom com La√ßo.png"});
ADD({id:54,name:"Cachecol Glorioso",price:3.99,stock:1,category:"baixo",promo:false,img:"public/img/Cachecol Glorioso.png"});
ADD({id:55,name:"Cachecol dos Corajosos",price:3.99,stock:1,category:"baixo",promo:false,img:"public/img/Cachecol dos Corajosos.png"});
ADD({id:56,name:"√Ås Surpresa",price:3.99,stock:1,category:"baixo",promo:false,img:"public/img/√Ås Surpresa.png"});
ADD({id:57,name:"√Ås de Copas",price:3.99,stock:1,category:"baixo",promo:false,img:"public/img/√Ås de Copas.png"});
ADD({id:58,name:"Estola Angelical",price:3.99,stock:1,category:"baixo",promo:false,img:"public/img/Estola Angelical.png"});
ADD({id:59,name:"√ìculos da Persona",price:3.99,stock:1,category:"baixo",promo:false,img:"public/img/√ìculos da Persona.png"});
/* PRODUTOS TOPO*/
ADD({id:61,name:"Mestre Arcanista",price:4.99,stock:2,category:"topo",promo:15,img:"public/img/mestre-arcanista.png"});
ADD({id:62,name:"Mestre Arcanista Azul",price:4.99,stock:2,category:"topo",promo:15,img:"public/img/mestre-arcanista-azul.png"});
ADD({id:63,name:"Mestre Arcanista Amarelo",price:4.99,stock:2,category:"topo",promo:15,img:"public/img/mestre-arcanista-amarelo.png"});
ADD({id:64,name:"Mestre Arcanista Vermelho",price:4.99,stock:2,category:"topo",promo:15,img:"public/img/mestre-arcanista-vermelho.png"});
ADD({id:65,name:"Mestre Arcanista Branco",price:4.99,stock:2,category:"topo",promo:15,img:"public/img/mestre-arcanista-branco.png"});
ADD({id:66,name:"Capuz do Mestre Necromante",price:3.99,stock:2,category:"topo",promo:false,img:"public/img/Capuz do Mestre Necromante.png"});
ADD({id:67,name:"Chap√©u de Tarlock",price:3.99,stock:2,category:"topo",promo:false,img:"public/img/Chap√©u de Tarlock.png"});
ADD({id:68,name:"Chap√©u do Comiss√°rio",price:14.99,stock:2,category:"topo",promo:15,img:"public/img/Chap√©u do Comiss√°rio.png"});
ADD({id:69,name:"Capa do Timoneiro",price:3.99,stock:2,category:"topo",promo:false,img:"public/img/Chap√©u do Timoneiro.png"});
ADD({id:70,name:"Boina Alada Branca",price:3.99,stock:2,category:"topo",promo:false,img:"public/img/Boina Alada Branca.png"});
/* PRODUTOS CARTA*/
ADD({id:80,name:"Carta Fara√≥",price:19.99,stock:1,category:"carta",promo:15,img:"public/img/Carta Fara√≥.png"});
/* PRODUTOS EQUIPAMENTO*/
ADD({id:90,name:"+14 Ma√ßa dos Orcs [2] EL8 EL7",price:29.99,stock:1,category:"equipamento",promo:15,img:"public/img/ma√ßa dos orcs.png"});
ADD({id:91,name:"+14 Protetor Sagrado [1]",price:19.99,stock:1,category:"equipamento",promo:15,img:"public/img/protetor sagrado.png"});
ADD({id:92,name:"+14 Faixa da Inquisi√ß√£o [1]",price:29.99,stock:1,category:"equipamento",promo:15,img:"public/img/Faixa da Inquisi√ß√£o.png"});
ADD({id:93,name:"Orelhas em Chamas [1]",price:19.99,stock:1,category:"equipamento",promo:15,img:"public/img/Orelhas em Chamas.png"});
ADD({id:94,name:"Asinhas de Detale [1]",price:19.99,stock:1,category:"equipamento",promo:15,img:"public/img/Asinhas de Detale.png"});
/* PRODUTOS CONSUMIVEL*/
ADD({id:100,name:"Pack [150] Po√ß√£o de Guyak",price:19.99,stock:1,category:"consumivel",promo:10,img:"public/img/Po√ß√£o de Guyak.png"});
ADD({id:101,name:"Pack [40] Fruta dos Gatos",price:7.99,stock:1,category:"consumivel",promo:15,img:"public/img/Fruta dos Gatos.png"});
ADD({id:102,name:"Caixa de Cupom Tintura",price:3.99,stock:4,category:"consumivel",promo:15,img:"public/img/Caixa de Cupom de Tintura.png"});

/* CARRINHO */
let cart=JSON.parse(localStorage.getItem("cart"))||[];

function syncStock(){
 productsData.forEach(p=>{
  const c=cart.find(i=>i.id===p.id);
  p.stock=p.baseStock-(c?c.qty:0);
 });
}

function updateCartBtn(){
 const q=cart.reduce((s,i)=>s+i.qty,0);
 cartBtn.innerText=`üõí Carrinho (${q})`;
 localStorage.setItem("cart",JSON.stringify(cart));
}

/* CATEGORIAS */
function renderCategories(){
 const cats=["all","equipamento","consumivel","carta","topo","meio","baixo","capa"];
 categories.innerHTML="";
 cats.forEach(c=>{
  categories.innerHTML+=`
   <button class="${c===currentCategory?"active":""}"
    onclick="currentCategory='${c}';page=1;render()">
    ${c==="all"?"Todos Produtos":c.charAt(0).toUpperCase()+c.slice(1)}
   </button>`;
 });
}

function render(){
 products.innerHTML="";
 pagination.innerHTML="";
 const term=search.value.toLowerCase();

 let filtered=productsData.filter(p=>
  p.name.toLowerCase().includes(term) &&
  (currentCategory==="all"||p.category===currentCategory)
 );

 const pages=Math.ceil(filtered.length/perPage);
 const slice=filtered.slice((page-1)*perPage,page*perPage);

 slice.forEach(p=>{
  products.innerHTML+=`
  <div class="product">
  <div class="product-card" data-promo="${p.promo}">
  ${p.promo && p.stock > 0 ? `<div class="promo-badge">${p.promo}% OFF</div>` : ""}
   <div class="image-box"><img src="${p.img}"></div>
   <h3>${p.name}</h3>
   <div class="price">R$ ${p.price}</div>
   <div class="stock">Estoque: ${p.stock}</div>
   <button ${p.stock<=0?"disabled":""} onclick="add(${p.id})">Adicionar</button>
  </div>`;
 });

 for(let i=1;i<=pages;i++){
  pagination.innerHTML+=`<button class="${i===page?"active":""}" onclick="page=${i};render()">${i}</button>`;
 }
 updateCartBtn();
}

function add(id){
 const p=productsData.find(i=>i.id===id);
 if(p.stock<=0)return;
 const c=cart.find(i=>i.id===id);
 c?c.qty++:cart.push({id:p.id,name:p.name,price:p.price,qty:1});
 syncStock();render();
}

function openCart(){cartModal.style.display="flex";renderCart()}
function closeCart(){cartModal.style.display="none"}

function changeQty(id,d){
 const c=cart.find(i=>i.id===id);
 if(!c)return;
 c.qty+=d;
 if(c.qty<=0)cart=cart.filter(i=>i.id!==id);
 syncStock();renderCart();render();
}

function renderCart(){
 let t=0;
 cartItems.innerHTML="";
 cart.forEach(i=>{
  const sub=i.price*i.qty;
  t+=sub;
  cartItems.innerHTML+=`
  <div class="cart-item">
   ${i.name}
   <div class="qty-controls">
    <button onclick="changeQty(${i.id},-1)">‚àí</button>
    ${i.qty}
    <button onclick="changeQty(${i.id},1)">+</button>
   </div>
   <span>R$ ${sub.toFixed(2)}</span>
  </div>`;
 });
 total.innerText=t.toFixed(2);
 updateCartBtn();
}

function checkout(){
 let msg="üõí *Pedido 4S STORE*%0A%0A";
 cart.forEach(i=>msg+=`‚Ä¢ ${i.name} x${i.qty}%0A`);
 msg+=`%0Aüí∞ Total: R$ ${total.innerText}`;
 window.open(`https://wa.me/${phone}?text=${msg}`);
 cart=[];syncStock();render();closeCart();
}

renderCategories();
syncStock();
render();
</script>
</body>
</html>
<script>
  // Script de bloqueio Ctrl+U
  document.onkeydown = function(e) {
    if (e.ctrlKey && e.key === 'u') {
      alert("Voc√™ n√£o pode visualizar o c√≥digo-fonte desta p√°gina!");
      return false;
    }
    // Bloqueio do bot√£o direito do mouse
    if (e.ctrlKey && e.shiftKey && e.key === 'I') {
      alert("Voc√™ n√£o pode acessar as ferramentas de desenvolvedor.");
      return false;
    }
  };

  // Desabilitar o clique com o bot√£o direito do mouse
  document.addEventListener("contextmenu", function(e) {
    e.preventDefault();
    alert("Voc√™ n√£o pode acessar o menu de contexto.");
  });
</script>
<script>
/* ===== RPG EFFECTS: BUY BUTTON + PRICE ===== */
(function(){

  /* ===== CSS INJETADO ===== */
  const style = document.createElement("style");
  style.innerHTML = `
    /* BOT√ÉO COMPRAR ‚Äî SKILL CLICK */
    .rpg-buy{
      position:relative;
      overflow:hidden;
    }
    .rpg-buy::after{
      content:"";
      position:absolute;
      inset:-60%;
      background:
        radial-gradient(circle,
          rgba(99,102,241,.55),
          transparent 60%);
      opacity:0;
      transition:.25s;
      mix-blend-mode:screen;
    }
    .rpg-buy:active{
      transform:scale(.92);
      box-shadow:
        0 0 25px #4338ca,
        0 0 50px rgba(99,102,241,.9) !important;
    }
    .rpg-buy:active::after{
      opacity:1;
    }

    /* PRE√áO ‚Äî RUNA ARCANA */
    .rpg-price{
      position:relative;
      color:#c7d2fe;
      text-shadow:
        0 0 10px rgba(99,102,241,.6),
        0 0 25px rgba(99,102,241,.9);
      animation:pricePulse 2.6s infinite alternate;
    }
    .rpg-price::before{
      content:"";
      position:absolute;
      inset:-6px;
      border-radius:8px;
      background:
        conic-gradient(
          from 0deg,
          transparent,
          rgba(99,102,241,.6),
          transparent
        );
      filter:blur(6px);
      opacity:.7;
      z-index:1;
      animation:priceSpin 4.5s linear infinite;
    }

    @keyframes pricePulse{
      from{opacity:.85}
      to{opacity:1}
    }
    @keyframes priceSpin{
      to{transform:rotate(360deg)}
    }
  `;
  document.head.appendChild(style);

  /* ===== DETEC√á√ÉO FLEX√çVEL ===== */
  const buyButtons = document.querySelectorAll(
    "button, a"
  );

  buyButtons.forEach(btn=>{
    const txt = btn.innerText?.toLowerCase() || "";
    if(
      txt.includes("comprar") ||
      txt.includes("buy") ||
      txt.includes("adicionar") ||
      txt.includes("checkout")
    ){
      btn.classList.add("rpg-buy");
    }
  });

  const prices = document.querySelectorAll(
    ".price, .preco, .valor, span, strong"
  );

  prices.forEach(p=>{
    const txt = p.innerText || "";
    if(txt.match(/R\\$|\\$|\\d+,\\d{2}|\\d+\\.\\d{2}/)){
      p.classList.add("rpg-price");
    }
  });

})();
</script>
<script>
(function(){

  const style = document.createElement("style");
  style.innerHTML = `
    .promo-badge{
      position:absolute;
      top:14px;
      right:14px;
      padding:6px 14px;
      font-size:11px;
      font-weight:700;
      letter-spacing:1px;
      text-transform:uppercase;
      color:#fff;
      background:linear-gradient(135deg,#22c55e,#22c55e);
      border-radius:999px;
      box-shadow:
        0 0 15px rgba(22, 163,74),
        0 0 35px rgba(22, 163,74);
      animation:pulsePromo 1.6s infinite;
      z-index:1;
      pointer-events:none;
    }

    @keyframes pulsePromo{
      0%{transform:scale(1)}
      50%{transform:scale(1.08)}
      100%{transform:scale(1)}
    }
  `;
  document.head.appendChild(style);

  document.querySelectorAll(".product-card").forEach(card=>{
    card.style.position = "relative";

    if(card.dataset.promo === "true"){
      const badge = document.createElement("div");
      badge.className = "promo-badge";
      badge.innerText = "PROMO√á√ÉO";
      card.appendChild(badge);
    }
  });

})();
</script>
<script>
/* üî• PATCH SIMPLES DE ESTOQUE ‚Äî FINAL DA P√ÅGINA */

(function(){
  const savedStock = JSON.parse(localStorage.getItem("products"));
if(savedStock){
  savedStock.forEach(s=>{
    const p = productsData.find(p=>p.id===s.id);
    if(p){
      p.baseStock = s.baseStock;
      p.stock = s.baseStock;
    }
  });
}

  // intercepta checkout original
  const originalCheckout = window.checkout;
  window.checkout = function(){
    // baixa estoque definitivo
    cart.forEach(item=>{
      const p = productsData.find(p=>p.id===item.id);
      if(p){
        p.baseStock -= item.qty;
        if(p.baseStock < 0) p.baseStock = 0;
      }
    });

    // salva estoque
    localStorage.setItem("products", JSON.stringify(productsData));

    // chama checkout original
    originalCheckout.apply(this, arguments);
  };
})();
</script>
<script>
/* üî• AJUSTE BADGE "SEM ESTOQUE" ‚Äî POSI√á√ÉO + COR */

(function(){
  const originalRender = window.render;

  window.render = function(){
    if(originalRender) originalRender.apply(this, arguments);

    document.querySelectorAll(".product").forEach(card=>{
      const stockEl = card.querySelector(".stock");
      if(!stockEl) return;

      const stock = Number(stockEl.innerText.replace(/\D/g,""));
      let badge = card.querySelector(".badge-sem-estoque");

      if(stock <= 0){
        if(!badge){
          badge = document.createElement("div");
          badge.className = "badge-sem-estoque";
          badge.innerText = "SEM ESTOQUE";
          card.style.position = "relative";
          card.appendChild(badge);
        }
      }else{
        if(badge) badge.remove();
      }
    });
  };
})();
</script>

<style>
/* üü° BADGE SEM ESTOQUE ‚Äî AMARELO + NOVA POSI√á√ÉO */
.badge-sem-estoque{
  position:absolute;
  bottom:15px;          /* ‚¨ÖÔ∏è fica embaixo */
  left:50%;
  transform:translateX(-50%);
  padding:12px 16px;
  font-size:10px;
  font-weight:70;
  letter-spacing:1px;
  text-transform:uppercase;
  color:#ffffff;
  background:linear-gradient(135deg,hsl(0, 98%, 51%),#f30909);
  border-radius:14px;
  box-shadow:
    0 0 12px rgba(255, 12, 12, 0.9),
    0 0 24px rgba(255, 12, 12, 0.9);
  z-index:3;
  pointer-events:none;
  
}

</style>
<script>
function updateProductUI(productId){
  const card = document.querySelector(`.product-card[data-id="${productId}"]`);
  if(!card) return;

  const estoqueEl = card.querySelector('.estoque');
  const promoBadge = card.querySelector('.promo-badge');
  const addBtn = card.querySelector('.add-btn');

  // pega estoque atual do texto
  let estoque = parseInt(estoqueEl.textContent.replace(/\D/g,''));

  if(estoque <= 0){
    // texto estoque
    estoqueEl.textContent = 'Estoque=: 0';

    // remove promo
    if(promoBadge) promoBadge.remove();

    // bot√£o SEM ESTOQUE
    if(addBtn){
      addBtn.disabled = true;
      addBtn.textContent = 'SEM ESTOQUE';
      addBtn.style.background = 'linear-gradient(135deg,#dc2626,#991b1b)';
      addBtn.style.cursor = 'not-allowed';
      addBtn.style.boxShadow = '0 0 20px rgba(220,38,38,.8)';
    }
  }
}

/* ‚ö° INTERCEPTA clique no bot√£o Adicionar */
document.addEventListener('click', e=>{
  if(!e.target.classList.contains('add-btn')) return;

  const card = e.target.closest('.product-card');
  const estoqueEl = card.querySelector('.estoque');

  let estoque = parseInt(estoqueEl.textContent.replace(/\D/g,''));
  estoque--;

  estoqueEl.textContent = `Estoque: ${estoque}`;

  const id = card.dataset.id;
  updateProductUI(id);
});
</script>
<script>
(function(){
  const style = document.createElement("style");
  style.innerHTML = `
    /* anima√ß√£o de respira√ß√£o */
    @keyframes breatheRed {
      0%{
        transform:scale(1);
        box-shadow:0 0 16px rgba(239,68,68,.6);
      }
      50%{
        transform:scale(1.08);
        box-shadow:0 0 28px rgba(239,68,68,.95);
      }
      100%{
        transform:scale(1);
        box-shadow:0 0 16px rgba(239,68,68,.6);
      }
    }

    /* SEM ESTOQUE com hover vivo */
    .product button[disabled]{
      pointer-events:auto !important;
      transition:.25s;
    }

    .product button[disabled]:hover{
      animation:breatheRed 1.6s ease-in-out infinite;
      filter:brightness(1.12);
    }
  `;
  document.head.appendChild(style);
})();

</script>
<!-- üîê PAINEL SECRETO 4S -->
<style>
#painel4s{
  position:fixed;
  inset:0;
  background:rgba(2,6,23,.92);
  display:none;
  z-index:999999;
  align-items:center;
  justify-content:center;
  font-family:Inter,sans-serif;
}
#painel4s .box{
  width:520px;
  max-height:80vh;
  overflow:auto;
  background:#020617;
  border:1px solid rgba(59,130,246,.4);
  border-radius:20px;
  padding:18px;
  box-shadow:0 0 40px rgba(59,130,246,.6);
}
#painel4s h3{
  margin:0 0 12px;
  text-align:center;
}
#painel4s input{
  width:100%;
  padding:12px;
  border-radius:12px;
  border:none;
  background:#020617;
  color:#fff;
  box-shadow:0 0 14px rgba(59,130,246,.3) inset;
  margin-bottom:12px;
}
.item4s{
  border-bottom:1px solid #1e293b;
  padding:10px 0;
}
.item4s strong{font-size:13px}
.ctrl4s{
  display:flex;
  align-items:center;
  gap:8px;
  margin-top:6px;
}
.ctrl4s button{
  padding:4px 10px;
  border:none;
  border-radius:8px;
  background:#2563eb;
  color:#fff;
  cursor:pointer;
}
.ctrl4s span{
  min-width:30px;
  text-align:center;
}
.hint4s{
  text-align:center;
  font-size:11px;
  opacity:.6;
  margin-top:10px;
}
</style>

<div id="painel4s">
  <div class="box">
    <h3>üîê Painel 4S ‚Äî Estoque</h3>
    <input id="busca4s" placeholder="Buscar por nome ou ID‚Ä¶">
    <div id="lista4s"></div>
    <div class="hint4s">ESC para fechar</div>
  </div>
</div>

<script>
(function(){
  const painel = document.getElementById("painel4s");
  const lista  = document.getElementById("lista4s");
  const busca  = document.getElementById("busca4s");

  /* ===== ABRIR COM C√ìDIGO 4S ===== */
  let buffer = "";
  document.addEventListener("keydown",e=>{
    if(e.key === "Escape"){
      painel.style.display="none";
      return;
    }
    if(e.target.tagName==="INPUT") return;

    buffer = (buffer + e.key.toLowerCase()).slice(-2);
    if(buffer === "4s"){
      painel.style.display="flex";
      busca.value="";
      renderPainel();
      buffer="";
    }
  });

  /* ===== RENDER PAINEL ===== */
  function renderPainel(){
    lista.innerHTML="";
    productsData.forEach(p=>{
      const div=document.createElement("div");
      div.className="item4s";
      div.dataset.search=(p.name+" "+p.id).toLowerCase();
      div.innerHTML=`
        <strong>${p.name}</strong> (ID: ${p.id})<br>
        <div class="ctrl4s">
          <button onclick="ajuste4s(${p.id},-1)">‚àí</button>
          <span>${p.baseStock}</span>
          <button onclick="ajuste4s(${p.id},1)">+</button>
        </div>
      `;
      lista.appendChild(div);
    });
  }

  /* ===== BUSCA ===== */
  busca.addEventListener("input",()=>{
    const v=busca.value.toLowerCase();
    lista.querySelectorAll(".item4s").forEach(i=>{
      i.style.display = i.dataset.search.includes(v) ? "block" : "none";
    });
  });

  /* ===== AJUSTE DE ESTOQUE ===== */
  window.ajuste4s=function(id,delta){
    const p=productsData.find(p=>p.id===id);
    if(!p) return;

    p.baseStock = Math.max(0,p.baseStock+delta);
    p.stock = p.baseStock;

    localStorage.setItem("products",JSON.stringify(productsData));
    renderPainel();
    render(); // atualiza loja
  };
})();
</script>

</body>
</html>